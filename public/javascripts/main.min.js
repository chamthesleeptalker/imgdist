function executefilters(a){var b={},c=$("#satelliteFilter").val();b.satellite=c;var d=$("#sensorFilter").val();b.sensor=d;var e=$("#dateFilterstart").val();b.Date1=e;var f=a._southWest,g=a._northEast;b.bbox=JSON.stringify([f.lng,f.lat,g.lng,g.lat]),$.get(main_url,b,function(a){a=JSON.parse(a),filterUpdate(a)})}function filterUpdate(a){ini_markers&&(ini_markers.clearLayers(),currentDiv.innerHTML=""),ini_markers.addData(a),data_array=ini_markers._layers;var b;for(b in data_array){var c=img_url+data_array[b].feature.properties.thumbnail_url,d=data_array[b].feature.properties.sensor,e=data_array[b].feature.properties.satellite,f=data_array[b].feature.properties.acquisition_date;console.log(data_array[b].feature.properties),imageCards(c,d,e,f)}}function imageCards(a,b,c,d){var e=document.createElement("div");e.className="col-lg-6";var f=document.createElement("div");f.className="card";var g=document.createElement("div");g.className="card-height-indicator";var h=document.createElement("div");h.className="card-content";var i=document.createElement("div");i.className="card-image";var j=document.createElement("img");j.src=a;var k=document.createElement("div");k.className="card-body";var l=document.createElement("p");l.innerHTML=b+","+c,k.appendChild(l),i.appendChild(j),h.appendChild(k),h.appendChild(i),g.appendChild(h),f.appendChild(g),e.appendChild(f),currentDiv.appendChild(e)}var main_url="http://diwataapi-lkpanganiban.rhcloud.com/api/scene/",img_url="http://diwataapi-lkpanganiban.rhcloud.com/static";$.material.init();var map=L.map("map"),osmUrl="http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",osmAttrib='Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',osm=new L.TileLayer(osmUrl,{minZoom:2,maxZoom:12,attribution:osmAttrib});map.setView(new L.LatLng(11.5,121.8),6),map.addLayer(osm);var width,height;width=$("#map_section").width(),height=$("#map_section").height();var areaSelect=L.areaSelect({width:width-100,height:height-100});areaSelect.addTo(map);var bounds=areaSelect.getBounds();areaSelect.on("change",function(){bounds=areaSelect.getBounds(),executefilters(bounds)});var geojsonMarkerOptions={radius:8,fillColor:"#1c3166",color:"#000",weight:1,opacity:1,fillOpacity:.8},ini_markers=L.geoJson(!1,{pointToLayer:function(a,b){return L.circleMarker(b,geojsonMarkerOptions)}});ini_markers.addTo(map),$(function(){$("#datefilterstart").datetimepicker({format:"MMM DD,YYYY",defaultDate:new Date})});var data=executefilters(bounds),currentDiv=document.getElementById("imageCards");$(document).ready(function(){$("#satelliteFilter,#sensorFilter,#datefilterstart").change(function(){data=executefilters(bounds)})});